<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<title>BitFlex | Secure Deposit</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600;800&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
:root{
  --bg:#0b0c10; --glass:rgba(255,255,255,.08);
  --gold:#e2ad1c; --green:#2cff6b; --red:#ff4d6d; --orange:#ffc107; --blue:#3498db;
}
*{box-sizing:border-box;font-family:'Vazirmatn';margin:0;padding:0}
body{background:radial-gradient(circle at top,#1f2833,#0b0c10);min-height:100vh;color:#fff;padding:25px;overflow-x:hidden;}
body::before{content:"";position:fixed;inset:0;background:radial-gradient(circle at 20% 10%,rgba(255,140,0,.15),transparent 40%),radial-gradient(circle at 80% 90%,rgba(44,255,107,.12),transparent 40%);animation:bgMove 12s infinite alternate;z-index:-1;}
@keyframes bgMove{from{transform:translateY(0)} to{transform:translateY(-40px)}}
.container{max-width:520px;margin:auto}
header{display:flex;align-items:center;gap:15px;margin-bottom:25px}
.logo{width:52px;height:52px;border-radius:50%;background:linear-gradient(135deg,#ffb347,#ff8c00);display:flex;align-items:center;justify-content:center;font-weight:900;font-size:22px;color:#000;}
h1{color:var(--gold)}
.card{background:var(--glass);backdrop-filter:blur(18px);border-radius:26px;padding:26px;border:1px solid rgba(255,255,255,.15);}
.result-text{display:none;text-align:center;font-size:20px;font-weight:900;margin-bottom:14px;}
.result-text.success{color:var(--green)}
.result-text.error{color:var(--red)}
.crypto-card{background:linear-gradient(135deg,#ffb347,#ff8c00);border-radius:22px;padding:22px;margin-bottom:20px;box-shadow:0 25px 60px rgba(0,0,0,.4);transition:.5s transform, .5s box-shadow;position:relative;overflow:hidden;}
.crypto-card:hover{transform:rotateY(6deg) rotateX(4deg) scale(1.05);box-shadow:0 35px 80px rgba(0,0,0,.5);}
.crypto-card::after{content:"";position:absolute;inset:-50%;background:linear-gradient(120deg,transparent,rgba(255,255,255,.35),transparent);transform:rotate(25deg);animation:shine 4s infinite;}
@keyframes shine{from{transform:translateX(-100%) rotate(25deg)} to{transform:translateX(100%) rotate(25deg)}}
.crypto-card small{opacity:.9} .crypto-card h2{margin:10px 0}
.timeline{display:flex;justify-content:space-between;font-size:12px;margin:18px 0;}
.timeline div{flex:1;text-align:center;opacity:.35;transition:.3s}
.timeline .done{opacity:1;color:var(--green)}
.timeline .active{opacity:1;color:var(--orange)}
.timeline .current{opacity:1;color:var(--gold)}
.crypto{background:rgba(255,255,255,.06);padding:14px 18px;border-radius:18px;margin-bottom:10px;cursor:pointer;transition:.3s}
.crypto:hover{background:rgba(255,255,255,.12)}
select,input,button{width:100%;margin-top:12px;padding:14px;border-radius:14px;border:none}
select,input{background:rgba(255,255,255,.08);color:#fff}
button{background:linear-gradient(135deg,#ff8c00,#ffb347);font-weight:800;cursor:pointer;margin-top:8px}
button.success-btn{background:linear-gradient(135deg,#2cff6b,#00ff88);}
.address{background:rgba(255,255,255,.08);padding:14px;border-radius:14px;margin-top:14px;text-align:center;white-space:pre-line;cursor:pointer;display:none}
.qr{display:flex;justify-content:center;margin-top:15px}
.status{text-align:center;margin-top:12px;font-weight:800}
.note{margin-top:18px;font-size:13px;opacity:.8;line-height:1.8}
.warning{margin-top:18px;padding:14px;background:rgba(255,77,77,.2);border-radius:12px;border:1px solid var(--red);font-size:14px;line-height:1.8;color:#ffdddd;}
.toast{position:fixed;top:25px;right:50%;transform:translateX(50%);background:rgba(20,20,20,.9);backdrop-filter:blur(15px);padding:16px 22px;border-radius:18px;font-weight:800;display:none;z-index:999;animation:drop .6s;}
.toast.success{color:var(--green);border:1px solid var(--green)}
.toast.error{color:var(--red);border:1px solid var(--red)}
@keyframes drop{from{opacity:0;transform:translate(50%,-20px)} to{opacity:1;transform:translate(50%,0)}}

.news-ticker {
    background: rgba(255,255,255,.05);
    padding: 12px 0;
    overflow: hidden;
    white-space: nowrap;
    border-radius: 12px;
    margin-bottom: 20px;
    box-shadow: 0 4px 10px rgba(0,0,0,.3);
}
.news-ticker span {
    display: inline-block;
    animation: marquee 35s linear infinite;
    font-size: 16px;
    color: #00ff99;
    text-shadow: 0 0 8px #00ff99;
}
@keyframes marquee {
    from { transform: translateX(100%); }
    to { transform: translateX(-100%); }
}

.modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.8);
    backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.4s ease;
}
.modal.active {
    opacity: 1;
    visibility: visible;
}
.modal-content {
    background: linear-gradient(135deg, #1e293b, #0f172a);
    border-radius: 24px;
    padding: 40px 30px;
    text-align: center;
    max-width: 90%;
    border: 2px solid var(--green);
    box-shadow: 0 0 40px rgba(44,255,107,0.4);
    transform: scale(0.7);
    transition: transform 0.5s ease;
}
.modal.active .modal-content {
    transform: scale(1);
}
.modal-content h2 {
    font-size: 28px;
    color: var(--green);
    margin-bottom: 16px;
    text-shadow: 0 0 10px var(--green);
}
.modal-content p {
    font-size: 18px;
    margin: 20px 0;
    opacity: 0.9;
}
.modal-content button {
    background: linear-gradient(135deg, #2cff6b, #00ff88);
    color: #000;
    font-weight: 800;
    padding: 14px 32px;
    border-radius: 16px;
    margin-top: 10px;
    border: none;
    cursor: pointer;
}
.modal.error .modal-content {
    border: 2px solid var(--red);
    box-shadow: 0 0 40px rgba(255,77,77,0.4);
}
.modal.error .modal-content h2 {
    color: var(--red);
    text-shadow: 0 0 10px var(--red);
}
.modal.error .modal-content button {
    background: linear-gradient(135deg, #ff4d6d, #ff1744);
    color: #fff;
}
</style>
</head>
<body>
<div class="container">
<header>
  <div class="logo">B</div>
  <h1>BitFlex</h1>
</header>

<div class="news-ticker">
  <span>ğŸ”¥ Ø¨ÛŒØªâ€ŒÚ©ÙˆÛŒÙ† Ø¨Ù‡ Ø±Ú©ÙˆØ±Ø¯ Ø¬Ø¯ÛŒØ¯ Ø±Ø³ÛŒØ¯! | ØªØ±ÛŒØ¯ Ø¨Ø§ Ú©Ù…ØªØ±ÛŒÙ† Ú©Ø§Ø±Ù…Ø²Ø¯ Ø¯Ø± BitFlex | Ø§Ù…Ù†ÛŒØª Ø¨Ø§Ù„Ø§ Ùˆ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Û²Û´ Ø³Ø§Ø¹ØªÙ‡ | ÙˆØ§Ø±ÛŒØ² Ùˆ Ø¨Ø±Ø¯Ø§Ø´Øª Ø¢Ù†ÛŒ</span>
</div>

<div class="card">
  <div id="resultText" class="result-text"></div>
  <div class="crypto-card">
    <small id="cardNetwork">â€”</small>
    <h2 id="cardCrypto">Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ø±Ø²</h2>
    <div id="cardAmount">0.00</div>
  </div>
  <div class="timeline">
    <div id="step1" class="done">Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª</div>
    <div id="step2" class="active">Ø§Ù†ØªØ¸Ø§Ø± ÙˆØ§Ø±ÛŒØ²</div>
    <div id="step3">Ø¨Ø±Ø±Ø³ÛŒ Ø±Ø¨Ø§Øª</div>
    <div id="step4">ØªØ£ÛŒÛŒØ¯ Ù†Ù‡Ø§ÛŒÛŒ</div>
  </div>

  <div class="crypto" onclick="selectCrypto('BTC')">Bitcoin (BEP20)</div>
  <div class="crypto" onclick="selectCrypto('ETH')">Ethereum (BEP20)</div>
  <div class="crypto" onclick="selectCrypto('USDT')">USDT</div>
  <select id="network" style="display:none">
    <option value="TRC20">TRC20</option>
    <option value="BEP20" selected>BEP20</option>
  </select>
  <input type="number" id="amount" placeholder="Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ø±ÛŒØ² (Ù…Ø«Ù„Ø§Ù‹ 0.001)" min="0" step="0.00000001">

  <button id="getAddrBtn" onclick="prepareDeposit()">Ø¯Ø±ÛŒØ§ÙØª Ø¢Ø¯Ø±Ø³</button>
  <button id="confirmBtn" onclick="submitDeposit()" class="success-btn" style="display:none;">
    âœ… Ø«Ø¨Øª ÙˆØ§Ø±ÛŒØ² Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡
  </button>

  <div class="address" id="addrBox" onclick="copyAddr()"></div>
  <div class="qr" id="qr"></div>
  <div class="status" id="status"></div>
  <div id="timerBox" style="text-align:center;margin-top:18px;font-size:16px;"></div>

  <div class="warning">
    <strong>âš ï¸ Ø¢Ø¯Ø±Ø³ ØµØ±Ø§ÙÛŒ Ø±Ø§ Ø¨Ø§ Ø¯Ù‚Øª Ú©Ù¾ÛŒ Ú©Ù†ÛŒØ¯ Ùˆ Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ ØªÙ…Ø§Ù… Ø¢Ø¯Ø±Ø³ Ø±Ø§ Ú©Ø§Ù…Ù„ Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯.</strong>
  </div>
  <div class="warning">
    <strong>âš ï¸ Ø¯Ø± ÙˆØ§Ø±ÛŒØ² Ø¨Ø³ÛŒØ§Ø± Ø¯Ù‚Øª Ú©Ù†ÛŒØ¯ Ùˆ Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ø¨Ù‡ Ø¢Ø¯Ø±Ø³ Ø¯Ø±Ø³Øª Ùˆ Ø´Ø¨Ú©Ù‡ ØµØ­ÛŒØ­ ÙˆØ§Ø±ÛŒØ² Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯.</strong>
  </div>
  <div class="warning">
    <strong>âš ï¸ Ø§Ú¯Ø± Ø§Ø´ØªØ¨Ø§Ù‡ÛŒ Ø¯Ø± ÙˆØ§Ø±ÛŒØ² Ø§Ø² Ø³Ù…Øª Ø´Ù…Ø§ Ø±Ø® Ø¯Ù‡Ø¯ØŒ BitFlex Ù‡ÛŒÚ†Ú¯ÙˆÙ†Ù‡ Ù…Ø³Ø¦ÙˆÙ„ÛŒØªÛŒ Ù‚Ø¨ÙˆÙ„ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</strong>
  </div>

  <div class="note">Ù¾Ø³ Ø§Ø² ÙˆØ§Ø±ÛŒØ²ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø´Ù…Ø§ ØªÙˆØ³Ø· Ø±Ø¨Ø§Øª Ø¨Ø±Ø±Ø³ÛŒ Ø´Ø¯Ù‡ Ùˆ Ù†ØªÛŒØ¬Ù‡ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</div>
</div>
</div>

<div id="successModal" class="modal">
  <div class="modal-content">
    <h2>ğŸ‰ ÙˆØ§Ø±ÛŒØ² Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!</h2>
    <p>Ù…Ø¨Ù„Øº Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø¨Ù‡ Ø­Ø³Ø§Ø¨ Ø´Ù…Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú¯Ø±Ø¯ÛŒØ¯.<br>Ù…ÙˆÙÙ‚ Ø¨Ø§Ø´ÛŒØ¯ Ùˆ Ø³ÙˆØ¯ Ú©Ù†ÛŒØ¯!</p>
    <button onclick="closeModal('successModal')">Ø¹Ø§Ù„ÛŒÙ‡ØŒ Ø¨Ø³ØªÙ†</button>
  </div>
</div>

<div id="failModal" class="modal error">
  <div class="modal-content">
    <h2>âŒ ÙˆØ§Ø±ÛŒØ² Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯</h2>
    <p>Ù…ØªØ£Ø³ÙØ§Ù†Ù‡ ØªØ±Ø§Ú©Ù†Ø´ Ø´Ù…Ø§ ØªØ£ÛŒÛŒØ¯ Ù†Ø´Ø¯.<br>Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù…Ù‚Ø¯Ø§Ø± ÛŒØ§ Ø´Ø¨Ú©Ù‡ Ø§Ø´ØªØ¨Ø§Ù‡ Ø¨Ø§Ø´Ø¯.<br>Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯ ÛŒØ§ Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯.</p>
    <button onclick="closeModal('failModal')">Ø¨Ø§Ø´Ù‡ØŒ Ø¨Ø³ØªÙ†</button>
  </div>
</div>

<div id="toast" class="toast"></div>
<audio id="successSound" src="https://freesound.org/data/previews/341/341695_3248244-lq.mp3"></audio>

<script>
let crypto = null, depositID = null, timerInterval = null;
let socket = io();

const ADDR = {
  USDT: {TRC20: 'TDAmj12GUxAMfNnuTUSwMG3f6mh83x1BBm', BEP20: '0x726146c21d24f02456afc1963c88c068920f6b1c'},
  BTC: '0x726146c21d24f02456afc1963c88c068920f6b1c',
  ETH: '0x726146c21d24f02456afc1963c88c068920f6b1c'
};

const cardCrypto = document.getElementById('cardCrypto');
const cardAmount = document.getElementById('cardAmount');
const cardNetwork = document.getElementById('cardNetwork');
const network = document.getElementById('network');
const amount = document.getElementById('amount');
const getAddrBtn = document.getElementById('getAddrBtn');
const confirmBtn = document.getElementById('confirmBtn');
const addrBox = document.getElementById('addrBox');
const qr = document.getElementById('qr');
const status = document.getElementById('status');
const timerBox = document.getElementById('timerBox');
const resultText = document.getElementById('resultText');
const toast = document.getElementById('toast');
const successSound = document.getElementById('successSound');

function selectCrypto(c){
  crypto = c;
  cardCrypto.innerText = c === 'BTC' ? 'Bitcoin' : c === 'ETH' ? 'Ethereum' : 'USDT';
  network.style.display = c === 'USDT' ? 'block' : 'none';
  getAddrBtn.style.display = 'block';
  confirmBtn.style.display = 'none';
  addrBox.style.display = 'none';
  qr.innerHTML = '';
  status.innerHTML = '';
  timerBox.innerHTML = '';
  clearInterval(timerInterval);
  resultText.style.display = 'none';
}

function prepareDeposit(){
  const amt = amount.value.trim();
  if(!crypto){ showToast('ÛŒÚ© Ø§Ø±Ø² Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯','error'); return; }
  if(!amt || amt <= 0){ showToast('Ù…Ù‚Ø¯Ø§Ø± Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯','error'); return; }
  
  let net = 'BEP20', addr = '';
  if(crypto === 'USDT'){
      net = network.value;
      addr = ADDR.USDT[net];
  } else {
      addr = ADDR[crypto];
  }

  cardAmount.innerText = parseFloat(amt).toFixed(8);
  cardNetwork.innerText = net;

  addrBox.style.display = 'block';
  addrBox.innerText = `Ø¢Ø¯Ø±Ø³ ÙˆØ§Ø±ÛŒØ²:\n${addr}\n\n(Ú©Ù„ÛŒÚ© Ø¨Ø±Ø§ÛŒ Ú©Ù¾ÛŒ)`;

  qr.innerHTML = '';
  new QRCode(qr, {
      text: addr,
      width: 180,
      height: 180,
      colorDark: "#ffffff",
      colorLight: "#1f2833"
  });

  status.innerHTML = 'â³ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ÙˆØ§Ø±ÛŒØ²...';
  status.style.color = 'var(--orange)';

  confirmBtn.style.display = 'block';
  getAddrBtn.style.display = 'none';

  timerBox.innerHTML = '';
  clearInterval(timerInterval);
}

function submitDeposit(){
  const amt = amount.value.trim();
  if(!crypto || !amt){ showToast('Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù†Ø§Ù‚Øµ','error'); return; }
  
  depositID = Date.now() + '_' + Math.floor(Math.random()*1000);

  showToast('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø«Ø¨Øª Ø´Ø¯','success');
  
  socket.emit('new_deposit',{
     deposit_id: depositID,
     crypto: crypto,
     network: network.value || 'BEP20',
     amount: amt,
     addr: addrBox.innerText.split('\n')[1]
  });

  status.innerHTML = 'â³ ÙˆØ§Ø±ÛŒØ² Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ (Ø­Ø¯Ø§Ú©Ø«Ø± Û²Û° Ø¯Ù‚ÛŒÙ‚Ù‡)';
  status.style.color = 'var(--orange)';
  
  startDepositTimer(); // Ø´Ø±ÙˆØ¹ ØªØ§ÛŒÙ…Ø± Ø¯Ù‚ÛŒÙ‚ Û²Û° Ø¯Ù‚ÛŒÙ‚Ù‡
  setTimelineStep(3);

  confirmBtn.style.display = 'none';
}

// ØªØ§Ø¨Ø¹ ØªØ§ÛŒÙ…Ø± â€” Ø¯Ø±Ø³Øª Ø´Ø¯Ù‡ Ùˆ Ø¯Ù‚ÛŒÙ‚ Ø§Ø² Û²Û°:Û°Û° Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒØ´Ù‡
function startDepositTimer() {
  let remainingSeconds = 20 * 60; // Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Û²Û° Ø¯Ù‚ÛŒÙ‚Ù‡ = Û±Û²Û°Û° Ø«Ø§Ù†ÛŒÙ‡

  clearInterval(timerInterval); // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªØ§ÛŒÙ…Ø± Ù‚Ø¨Ù„ÛŒ

  timerInterval = setInterval(() => {
    let minutes = Math.floor(remainingSeconds / 60);
    let seconds = remainingSeconds % 60;

    timerBox.innerHTML = `
      Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡: 
      <span style="
        font-size: 1.6em;
        font-weight: bold;
        color: #3498db;
        background: rgba(52, 152, 219, 0.15);
        padding: 10px 22px;
        border-radius: 16px;
        display: inline-block;
        box-shadow: 0 4px 12px rgba(52, 152, 219, 0.2);
      ">
        ( ${minutes.toString().padStart(2, '0')} : ${seconds.toString().padStart(2, '0')} )
      </span>
    `;

    if (remainingSeconds <= 0) {
      clearInterval(timerInterval);
      timerBox.innerHTML = `
        <div style="
          font-size: 1.3em;
          font-weight: bold;
          color: #e67e22;
          background: rgba(230, 126, 34, 0.15);
          padding: 14px 24px;
          border-radius: 14px;
          text-align: center;
        ">
          â° Ø²Ù…Ø§Ù† Ø¨Ø±Ø±Ø³ÛŒ ØªÙ…Ø§Ù… Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ ØµØ¨ÙˆØ± Ùˆ Ø´Ú©ÛŒØ¨Ø§ Ø¨Ø§Ø´ÛŒØ¯
        </div>
      `;
    }

    remainingSeconds--; // Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ ÛŒÚ© Ø«Ø§Ù†ÛŒÙ‡ Ú©Ù… Ù…ÛŒâ€ŒØ´Ù‡
  }, 1000); // Ù‡Ø± Û±Û°Û°Û° Ù…ÛŒÙ„ÛŒâ€ŒØ«Ø§Ù†ÛŒÙ‡ = ÛŒÚ© Ø«Ø§Ù†ÛŒÙ‡ ÙˆØ§Ù‚Ø¹ÛŒ
}

function setTimelineStep(step){
  for(let i=1; i<=4; i++){
    const el = document.getElementById('step'+i);
    el.classList.remove('active','current','done');
    if(i < step) el.classList.add('done');
    if(i === step) el.classList.add('current');
    if(i > step) el.classList.add('active');
  }
}

socket.on('deposit_result', data => {
  if(data.deposit_id && data.deposit_id === depositID){
    if(data.status === 'success') applyResult('success');
    if(data.status === 'failed') applyResult('failed');
  }
});

function applyResult(type){
  clearInterval(timerInterval);
  timerBox.innerHTML = '';
  resultText.style.display = 'block';

  if(type === 'success'){
    resultText.className = 'result-text success';
    resultText.innerText = 'ÙˆØ§Ø±ÛŒØ² Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØ£ÛŒÛŒØ¯ Ø´Ø¯ â¤ï¸';
    showToast('ÙˆØ§Ø±ÛŒØ² ØªØ£ÛŒÛŒØ¯ Ø´Ø¯','success');
    setTimelineStep(4);
    confetti({particleCount:200, spread:80, origin:{y:0.6}});
    successSound.play();
    document.getElementById('successModal').classList.add('active');
    if(Notification.permission === "granted") new Notification("BitFlex",{body:"ÙˆØ§Ø±ÛŒØ² Ø´Ù…Ø§ ØªØ£ÛŒÛŒØ¯ Ø´Ø¯ âœ…"});
  } else {
    resultText.className = 'result-text error';
    resultText.innerText = 'ÙˆØ§Ø±ÛŒØ² Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯ âŒ';
    showToast('ÙˆØ§Ø±ÛŒØ² Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯','error');
    setTimelineStep(4);
    document.getElementById('failModal').classList.add('active');
  }
}

function closeModal(modalId){
  document.getElementById(modalId).classList.remove('active');
}

function showToast(msg, type){
  toast.className = `toast ${type}`;
  toast.innerText = msg;
  toast.style.display = 'block';
  setTimeout(() => toast.style.display = 'none', 4000);
}

function copyAddr(){
  const addr = addrBox.innerText.split('\n')[1];
  navigator.clipboard.writeText(addr);
  showToast('Ø¢Ø¯Ø±Ø³ Ú©Ù¾ÛŒ Ø´Ø¯','success');
}

if("Notification" in window && Notification.permission !== "granted"){
  Notification.requestPermission();
}
</script>
</body>
</html>
